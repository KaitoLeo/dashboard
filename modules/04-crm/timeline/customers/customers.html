<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý Khách hàng - Actiwell CMS</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css">
</head>
<body>
    <!-- Preloader -->
    <div id="preloader">
        <div id="status">
            <div class="spinner-chase">
                <div class="chase-dot"></div>
                <div class="chase-dot"></div>
                <div class="chase-dot"></div>
                <div class="chase-dot"></div>
                <div class="chase-dot"></div>
                <div class="chase-dot"></div>
            </div>
        </div>
    </div>

    <!-- Layout Wrapper -->
    <div id="layout-wrapper">
        <!-- Header -->
        <header id="page-topbar">
            <div class="navbar-header">
                <div class="d-flex justify-content-center align-items-center">
                    <button type="button" class="btn btn-sm font-size-16 header-item" id="vertical-menu-btn">
                        <img src="../assets/images/logo.png" alt="Logo" style="width: 2rem;">
                    </button>
                    <h3 class="header-title">Khách hàng</h3>
                    <h3 class="header-subtitle"> / Danh sách khách hàng</h3>
                </div>
                <div class="d-flex flex-row">
                    <!-- Profile Menu -->
                    <div class="dropdown d-inline-block">
                        <button type="button" class="btn header-item waves-effect" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="rounded-circle header-profile-user" src="https://via.placeholder.com/36x36" alt="Header Avatar">
                            <span class="d-none d-xl-inline-block ms-1 fw-medium">Admin</span>
                            <i class="mdi mdi-chevron-down d-none d-xl-inline-block"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-end">
                            <a class="dropdown-item" href="#"><i class="mdi mdi-account-circle text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Profile</span></a>
                            <a class="dropdown-item" href="#"><i class="mdi mdi-wallet text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">My Wallet</span></a>
                            <a class="dropdown-item" href="#"><i class="mdi mdi-cog-outline text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Settings</span></a>
                            <a class="dropdown-item" href="#"><i class="mdi mdi-lock text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Lock screen</span></a>
                            <a class="dropdown-item" href="#"><i class="mdi mdi-logout text-muted font-size-16 align-middle me-1"></i> <span class="align-middle">Logout</span></a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <div class="vertical-menu">
            <div class="navbar-brand-box">
                <a href="../index.html" class="logo logo-dark">
                    <span class="logo-sm">
                        <img src="../assets/images/logo.svg" alt="" height="22">
                    </span>
                    <span class="logo-lg">
                        <img src="../assets/images/logo-dark.png" alt="" height="17">
                    </span>
                </a>
                <a href="../index.html" class="logo logo-light">
                    <span class="logo-sm">
                        <img src="../assets/images/logo-light.svg" alt="" height="22">
                    </span>
                    <span class="logo-lg">
                        <img src="../assets/images/logo-light.png" alt="" height="19">
                    </span>
                </a>
            </div>
            <div data-simplebar class="h-100">
                <div id="sidebar-menu">
                    <ul class="metismenu list-unstyled" id="side-menu">
                        <li class="menu-title">Menu</li>
                        
                        <li>
                            <a href="../index.html" class="waves-effect">
                                <i class="bx bx-home-circle"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>

                        <li class="mm-active">
                            <a href="javascript: void(0);" class="has-arrow waves-effect">
                                <i class="bx bx-user"></i>
                                <span>Khách hàng</span>
                            </a>
                            <ul class="sub-menu" aria-expanded="true">
                                <li class="mm-active"><a href="customers.html">Danh sách khách hàng</a></li>
                                <li><a href="customer-groups.html">Nhóm khách hàng</a></li>
                                <li><a href="customer-reviews.html">Đánh giá khách hàng</a></li>
                            </ul>
                        </li>

                        <li>
                            <a href="javascript: void(0);" class="has-arrow waves-effect">
                                <i class="bx bx-user-circle"></i>
                                <span>Nhân viên</span>
                            </a>
                            <ul class="sub-menu" aria-expanded="false">
                                <li><a href="staff.html">Danh sách nhân viên</a></li>
                                <li><a href="staff-schedule.html">Lịch làm việc</a></li>
                            </ul>
                        </li>

                        <li>
                            <a href="javascript: void(0);" class="has-arrow waves-effect">
                                <i class="bx bx-calendar"></i>
                                <span>Lịch đặt</span>
                            </a>
                            <ul class="sub-menu" aria-expanded="false">
                                <li><a href="booking.html">Quản lý đặt lịch</a></li>
                                <li><a href="calendar.html">Lịch tổng quan</a></li>
                            </ul>
                        </li>

                        <li>
                            <a href="javascript: void(0);" class="has-arrow waves-effect">
                                <i class="bx bx-package"></i>
                                <span>Gói dịch vụ</span>
                            </a>
                            <ul class="sub-menu" aria-expanded="false">
                                <li><a href="packages.html">Danh sách gói</a></li>
                                <li><a href="services.html">Dịch vụ</a></li>
                            </ul>
                        </li>

                        <li>
                            <a href="javascript: void(0);" class="has-arrow waves-effect">
                                <i class="bx bx-chart"></i>
                                <span>Báo cáo</span>
                            </a>
                            <ul class="sub-menu" aria-expanded="false">
                                <li><a href="sales-report.html">Báo cáo doanh thu</a></li>
                                <li><a href="customer-report.html">Báo cáo khách hàng</a></li>
                            </ul>
                        </li>

                        <li>
                            <a href="javascript: void(0);" class="has-arrow waves-effect">
                                <i class="bx bx-cog"></i>
                                <span>Cài đặt</span>
                            </a>
                            <ul class="sub-menu" aria-expanded="false">
                                <li><a href="settings.html">Cài đặt chung</a></li>
                                <li><a href="policy.html">Chính sách</a></li>
                            </ul>
                        </li>
                    </ul>
            </div>
            <div class="sidebar-background"></div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="page-content">
                <div class="container-fluid">
                    <!-- Page Title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                                <h4 class="mb-sm-0 font-size-18">Danh sách khách hàng</h4>
                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="../index.html">Dashboard</a></li>
                                        <li class="breadcrumb-item active">Khách hàng</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Filter and Search -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <div class="d-flex gap-2">
                                <button class="btn btn-primary">
                                    <i class="bx bx-plus"></i> Thêm khách hàng
                                </button>
                                <button class="btn btn-outline-secondary">
                                    <i class="bx bx-export"></i> Xuất Excel
                                </button>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex gap-2 justify-content-end">
                                <div class="search-box">
                                    <input type="text" class="form-control" placeholder="Tìm kiếm khách hàng...">
                                    <i class="bx bx-search search-icon"></i>
                                </div>
                                <select class="form-select" style="width: auto;">
                                    <option value="">Tất cả trạng thái</option>
                                    <option value="active">Hoạt động</option>
                                    <option value="inactive">Không hoạt động</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Customers Table -->
                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-nowrap align-middle mb-0" id="customersTable">
                                            <thead>
                                                <tr>
                                                    <th>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox" id="selectAll">
                                                            <label class="form-check-label" for="selectAll"></label>
                                                        </div>
                                                    </th>
                                                    <th>Khách hàng</th>
                                                    <th>Liên hệ</th>
                                                    <th>Ngày tham gia</th>
                                                    <th>Tổng chi tiêu</th>
                                                    <th>Lần cuối</th>
                                                    <th>Trạng thái</th>
                                                    <th>Thao tác</th>
                                                </tr>
                                            </thead>
                                            <tbody id="customersTableBody">
                                                <!-- Data will be loaded here -->
                                            </tbody>
                                        </table>
                                    </div>

                                    <!-- Pagination -->
                                    <div class="row mt-3">
                                        <div class="col-sm-12 col-md-5">
                                            <div class="dataTables_info">
                                                Hiển thị <span id="showingFrom">1</span> đến <span id="showingTo">5</span> trong <span id="totalRecords">5</span> bản ghi
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-7">
                                            <div class="dataTables_paginate paging_simple_numbers">
                                                <ul class="pagination pagination-rounded justify-content-end">
                                                    <li class="paginate_button page-item previous disabled">
                                                        <a href="#" class="page-link">Trước</a>
                                                    </li>
                                                    <li class="paginate_button page-item active">
                                                        <a href="#" class="page-link">1</a>
                                                    </li>
                                                    <li class="paginate_button page-item">
                                                        <a href="#" class="page-link">2</a>
                                                    </li>
                                                    <li class="paginate_button page-item">
                                                        <a href="#" class="page-link">3</a>
                                                    </li>
                                                    <li class="paginate_button page-item next">
                                                        <a href="#" class="page-link">Sau</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../data/sample-data.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/script.js"></script>
    <script>
        // Load customers data
        document.addEventListener('DOMContentLoaded', function() {
            loadCustomersData();
        });

        function loadCustomersData() {
            const customers = SampleData.customers;
            const tbody = document.getElementById('customersTableBody');
            
            tbody.innerHTML = customers.map(customer => `
                <tr>
                    <td>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="${customer.id}">
                        </div>
                    </td>
                    <td>
                        <div class="d-flex align-items-center">
                            <div class="avatar-xs me-2">
                                <span class="avatar-title rounded-circle bg-primary text-white">
                                    ${customer.avatar}
                                </span>
                            </div>
                            <div>
                                <h6 class="mb-0">${customer.name}</h6>
                                <p class="text-muted mb-0">ID: #${customer.id.toString().padStart(4, '0')}</p>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div>
                            <p class="mb-0">${customer.email}</p>
                            <p class="text-muted mb-0">${customer.phone}</p>
                        </div>
                    </td>
                    <td>${formatDate(customer.joinDate)}</td>
                    <td>${formatCurrency(customer.totalSpent)}</td>
                    <td>${formatDate(customer.lastVisit)}</td>
                    <td>
                        <span class="badge ${customer.status === 'active' ? 'bg-success' : 'bg-secondary'}">
                            ${customer.status === 'active' ? 'Hoạt động' : 'Không hoạt động'}
                        </span>
                    </td>
                    <td>
                        <div class="d-flex gap-1">
                            <button class="btn btn-sm btn-outline-primary" onclick="viewCustomer(${customer.id})">
                                <i class="bx bx-show"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-warning" onclick="editCustomer(${customer.id})">
                                <i class="bx bx-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteCustomer(${customer.id})">
                                <i class="bx bx-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('vi-VN');
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND'
            }).format(amount);
        }

        function viewCustomer(id) {
            alert(`Xem thông tin khách hàng ID: ${id}`);
        }

        function editCustomer(id) {
            alert(`Chỉnh sửa khách hàng ID: ${id}`);
        }

        function deleteCustomer(id) {
            if (confirm('Bạn có chắc chắn muốn xóa khách hàng này?')) {
                alert(`Đã xóa khách hàng ID: ${id}`);
            }
        }
    </script>

    <!-- SPA System -->
    <script src="../assets/js/spa/store.js"></script>
    <script src="../assets/js/spa/components.js"></script>
    <script src="../assets/js/spa/router.js"></script>
    <script src="../assets/js/spa/integration.js"></script>
</body>
</html>
