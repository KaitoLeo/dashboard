<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Ngày Còn lại Trong Tháng - Chi tiết Tính toán - Actiwell Reports
    </title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link href="../assets/css/style.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-warning">
      <div class="container-fluid">
        <a class="navbar-brand" href="../index.html">
          <i class="fas fa-arrow-left me-2"></i>
          <i class="fas fa-heartbeat me-2"></i>
          Actiwell Reports
        </a>
        <div class="navbar-nav ms-auto">
          <a class="nav-link" href="revenue-mtd-detail.html">
            <i class="fas fa-arrow-left me-1"></i>Quay lại MTD Detail
          </a>
        </div>
        <div class="navbar-nav">
          <span class="navbar-text text-white">
            <i class="fas fa-clock me-1"></i>
            <span id="currentTime"></span> |
            <span id="currentDate"></span>
          </span>
        </div>
      </div>
    </nav>

    <div class="container-fluid mt-4">
      <!-- Header -->
      <div class="row mb-4">
        <div class="col-12">
          <h2 class="text-warning">
            <i class="fas fa-calendar-alt me-2"></i>Ngày Còn lại Trong Tháng -
            Chi tiết Tính toán
          </h2>
          <p class="text-muted">
            Phân tích chi tiết số ngày còn lại và dự báo doanh thu cuối tháng
          </p>
        </div>
      </div>

      <!-- Key Metrics -->
      <div class="row mb-4">
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="card bg-warning text-white">
            <div class="card-body text-center">
              <i class="fas fa-calendar-alt fa-2x mb-2"></i>
              <h6>Ngày còn lại</h6>
              <h3 id="remainingDaysValue">8</h3>
              <small>ngày</small>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="card bg-primary text-white">
            <div class="card-body text-center">
              <i class="fas fa-chart-line fa-2x mb-2"></i>
              <h6>Doanh thu cần đạt</h6>
              <h3>650,000,000</h3>
              <small>VNĐ</small>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="card bg-success text-white">
            <div class="card-body text-center">
              <i class="fas fa-target fa-2x mb-2"></i>
              <h6>Mục tiêu tháng</h6>
              <h3>2,500,000,000</h3>
              <small>VNĐ</small>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-3">
          <div class="card bg-info text-white">
            <div class="card-body text-center">
              <i class="fas fa-percentage fa-2x mb-2"></i>
              <h6>% Hoàn thành</h6>
              <h3>62%</h3>
              <small>mục tiêu</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Calculation Formula -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-calculator me-2"></i>Công thức tính toán ngày
                còn lại
              </h5>
            </div>
            <div class="card-body">
              <div class="alert alert-warning">
                <h6 class="mb-3">
                  <i class="fas fa-formula me-2"></i>Công thức chính:
                </h6>
                <div class="formula-box bg-light p-3 rounded">
                  <h5 class="text-warning mb-3">
                    <strong
                      >Ngày còn lại = Tổng ngày trong tháng - Ngày đã qua - Ngày
                      nghỉ lễ</strong
                    >
                  </h5>
                  <div class="example-calculation">
                    <h6 class="text-primary mb-2">Ví dụ tính toán thực tế:</h6>
                    <div
                      class="calculation-example bg-white p-3 rounded border"
                    >
                      <h4 class="text-warning mb-0">
                        <strong>8 = 30 - 22 - 0</strong>
                      </h4>
                      <small class="text-muted"
                        >Tháng 9 có 30 ngày, đã qua 22 ngày, không có ngày nghỉ
                        lễ</small
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Progress Chart -->
      <div class="row mb-4">
        <div class="col-lg-8 mb-4">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-chart-bar me-2"></i>Tiến độ thực hiện mục tiêu
                tháng
              </h5>
            </div>
            <div class="card-body">
              <canvas id="progressChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-lg-4 mb-4">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-chart-pie me-2"></i>Phân bố thời gian
              </h5>
            </div>
            <div class="card-body">
              <canvas id="timeDistributionChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Remaining Days Breakdown -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-table me-2"></i>Chi tiết 8 ngày còn lại
              </h5>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-striped table-hover">
                  <thead class="table-dark">
                    <tr>
                      <th>Ngày</th>
                      <th>Thứ</th>
                      <th>Dự báo doanh thu (VNĐ)</th>
                      <th>Dựa trên xu hướng</th>
                      <th>Độ ưu tiên</th>
                      <th>Ghi chú</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>23/09</td>
                      <td>Thứ 2</td>
                      <td>65,000,000</td>
                      <td>Trung bình thứ 2</td>
                      <td><span class="badge bg-primary">Cao</span></td>
                      <td>Đầu tuần</td>
                    </tr>
                    <tr>
                      <td>24/09</td>
                      <td>Thứ 3</td>
                      <td>70,000,000</td>
                      <td>Trung bình thứ 3</td>
                      <td><span class="badge bg-primary">Cao</span></td>
                      <td>Bình thường</td>
                    </tr>
                    <tr>
                      <td>25/09</td>
                      <td>Thứ 4</td>
                      <td>68,000,000</td>
                      <td>Trung bình thứ 4</td>
                      <td><span class="badge bg-primary">Cao</span></td>
                      <td>Bình thường</td>
                    </tr>
                    <tr>
                      <td>26/09</td>
                      <td>Thứ 5</td>
                      <td>75,000,000</td>
                      <td>Trung bình thứ 5</td>
                      <td><span class="badge bg-primary">Cao</span></td>
                      <td>Bình thường</td>
                    </tr>
                    <tr>
                      <td>27/09</td>
                      <td>Thứ 6</td>
                      <td>80,000,000</td>
                      <td>Trung bình thứ 6</td>
                      <td><span class="badge bg-success">Rất cao</span></td>
                      <td>Cuối tuần</td>
                    </tr>
                    <tr>
                      <td>28/09</td>
                      <td>Thứ 7</td>
                      <td>75,000,000</td>
                      <td>Trung bình thứ 7</td>
                      <td><span class="badge bg-success">Rất cao</span></td>
                      <td>Cuối tuần</td>
                    </tr>
                    <tr>
                      <td>29/09</td>
                      <td>Chủ nhật</td>
                      <td>50,000,000</td>
                      <td>Trung bình chủ nhật</td>
                      <td><span class="badge bg-warning">Trung bình</span></td>
                      <td>Ngày nghỉ</td>
                    </tr>
                    <tr>
                      <td>30/09</td>
                      <td>Thứ 2</td>
                      <td>65,000,000</td>
                      <td>Trung bình thứ 2</td>
                      <td><span class="badge bg-success">Rất cao</span></td>
                      <td>Ngày cuối tháng</td>
                    </tr>
                    <tr class="table-success">
                      <td><strong>TỔNG CỘNG</strong></td>
                      <td><strong>8 ngày</strong></td>
                      <td><strong class="text-success">558,000,000</strong></td>
                      <td><strong>Dự báo</strong></td>
                      <td><span class="badge bg-success">Hoàn thành</span></td>
                      <td><strong>Cuối tháng</strong></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Revenue Forecast -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-crystal-ball me-2"></i>Dự báo doanh thu cuối
                tháng
              </h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-lg-4">
                  <div class="text-center p-3">
                    <i class="fas fa-chart-line fa-3x text-success mb-3"></i>
                    <h6>Kịch bản Tích cực</h6>
                    <h4 class="text-success">2,600,000,000 VNĐ</h4>
                    <p>Doanh thu cao hơn 4% so với mục tiêu</p>
                  </div>
                </div>
                <div class="col-lg-4">
                  <div class="text-center p-3">
                    <i class="fas fa-chart-bar fa-3x text-primary mb-3"></i>
                    <h6>Kịch bản Cơ bản</h6>
                    <h4 class="text-primary">2,408,000,000 VNĐ</h4>
                    <p>Đạt 96.3% mục tiêu tháng</p>
                  </div>
                </div>
                <div class="col-lg-4">
                  <div class="text-center p-3">
                    <i
                      class="fas fa-chart-line-down fa-3x text-warning mb-3"
                    ></i>
                    <h6>Kịch bản Thận trọng</h6>
                    <h4 class="text-warning">2,200,000,000 VNĐ</h4>
                    <p>Đạt 88% mục tiêu tháng</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Plan -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-tasks me-2"></i>Kế hoạch hành động cho 8 ngày
                còn lại
              </h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-lg-6">
                  <h6 class="text-success">Hành động ngay lập tức:</h6>
                  <ul>
                    <li>
                      <strong>Tăng cường marketing:</strong> Chạy campaign cuối
                      tháng
                    </li>
                    <li>
                      <strong>Ưu đãi đặc biệt:</strong> Giảm giá 10% cho
                      membership mới
                    </li>
                    <li>
                      <strong>PT Fitnesss:</strong> Tăng cường booking PT Fitness cuối
                      tuần
                    </li>
                    <li>
                      <strong>Group classes:</strong> Mở thêm lớp vào giờ cao
                      điểm
                    </li>
                  </ul>

                  <h6 class="text-primary">Hành động trung hạn:</h6>
                  <ul>
                    <li>
                      <strong>Retention:</strong> Gọi điện chăm sóc khách hàng
                      cũ
                    </li>
                    <li>
                      <strong>Upselling:</strong> Bán thêm dịch vụ bổ sung
                    </li>
                    <li>
                      <strong>Partnership:</strong> Hợp tác với các thương hiệu
                      khác
                    </li>
                    <li><strong>Events:</strong> Tổ chức sự kiện cuối tuần</li>
                  </ul>
                </div>
                <div class="col-lg-6">
                  <h6 class="text-info">Theo dõi và đánh giá:</h6>
                  <ul>
                    <li>
                      <strong>Daily tracking:</strong> Theo dõi doanh thu hàng
                      ngày
                    </li>
                    <li>
                      <strong>Real-time alerts:</strong> Cảnh báo khi doanh thu
                      thấp
                    </li>
                    <li><strong>Team meetings:</strong> Họp team mỗi ngày</li>
                    <li>
                      <strong>Performance review:</strong> Đánh giá hiệu suất
                      từng cơ sở
                    </li>
                  </ul>

                  <h6 class="text-warning">Rủi ro và giảm thiểu:</h6>
                  <ul>
                    <li>
                      <strong>Weather impact:</strong> Chuẩn bị kế hoạch B cho
                      thời tiết xấu
                    </li>
                    <li>
                      <strong>Staff shortage:</strong> Đảm bảo đủ nhân viên cuối
                      tuần
                    </li>
                    <li>
                      <strong>Equipment issues:</strong> Kiểm tra thiết bị trước
                      cuối tuần
                    </li>
                    <li>
                      <strong>Competition:</strong> Theo dõi đối thủ cạnh tranh
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Historical Analysis -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-chart-line me-2"></i>Phân tích lịch sử 8 ngày
                cuối tháng
              </h5>
            </div>
            <div class="card-body">
              <canvas id="historicalEndMonthChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Methodology -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5 class="mb-0">
                <i class="fas fa-database me-2"></i>Phương pháp tính toán và dự
                báo
              </h5>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-lg-6">
                  <h6 class="text-primary">Công thức tính ngày còn lại:</h6>
                  <ol>
                    <li>
                      <strong>Xác định tổng ngày trong tháng:</strong> 30 ngày
                      (tháng 9)
                    </li>
                    <li><strong>Trừ đi ngày đã qua:</strong> 22 ngày</li>
                    <li><strong>Trừ đi ngày nghỉ lễ:</strong> 0 ngày</li>
                    <li><strong>Kết quả:</strong> 8 ngày còn lại</li>
                  </ol>

                  <h6 class="text-success">Dự báo doanh thu:</h6>
                  <ul>
                    <li>
                      <strong>Xu hướng lịch sử:</strong> Dựa trên dữ liệu 3
                      tháng gần đây
                    </li>
                    <li>
                      <strong>Yếu tố mùa vụ:</strong> Điều chỉnh theo thời điểm
                    </li>
                    <li>
                      <strong>Ngày trong tuần:</strong> Phân tích theo thứ
                    </li>
                    <li>
                      <strong>Campaign marketing:</strong> Tác động của chiến
                      dịch
                    </li>
                  </ul>
                </div>
                <div class="col-lg-6">
                  <h6 class="text-info">Độ chính xác dự báo:</h6>
                  <ul>
                    <li><strong>Kịch bản tích cực:</strong> 20% khả năng</li>
                    <li><strong>Kịch bản cơ bản:</strong> 60% khả năng</li>
                    <li><strong>Kịch bản thận trọng:</strong> 20% khả năng</li>
                  </ul>

                  <h6 class="text-warning">Lưu ý quan trọng:</h6>
                  <ul>
                    <li>Dự báo có thể thay đổi theo tình hình thực tế</li>
                    <li>Cần cập nhật hàng ngày</li>
                    <li>Xem xét các yếu tố bất ngờ</li>
                    <li>Điều chỉnh kế hoạch khi cần thiết</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/realtime-clock.js"></script>
    <script>
      // Progress Chart
      const progressCtx = document
        .getElementById("progressChart")
        .getContext("2d");
      new Chart(progressCtx, {
        type: "bar",
        data: {
          labels: ["Đã thực hiện", "Còn thiếu", "Mục tiêu"],
          datasets: [
            {
              label: "Doanh thu (VNĐ)",
              data: [1850000000, 650000000, 2500000000],
              backgroundColor: ["#198754", "#ffc107", "#6c757d"],
              borderWidth: 1,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: "Tiến độ thực hiện mục tiêu tháng 9/2025",
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function (value) {
                  return (value / 1000000000).toFixed(1) + "B";
                },
              },
            },
          },
        },
      });

      // Time Distribution Chart
      const timeDistributionCtx = document
        .getElementById("timeDistributionChart")
        .getContext("2d");
      new Chart(timeDistributionCtx, {
        type: "doughnut",
        data: {
          labels: ["Đã qua (22 ngày)", "Còn thiếu (8 ngày)"],
          datasets: [
            {
              data: [22, 8],
              backgroundColor: ["#198754", "#ffc107"],
              borderWidth: 2,
              borderColor: "#fff",
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: "Phân bố thời gian trong tháng",
            },
            legend: {
              position: "bottom",
            },
          },
        },
      });

      // Historical End Month Chart
      const historicalEndMonthCtx = document
        .getElementById("historicalEndMonthChart")
        .getContext("2d");
      new Chart(historicalEndMonthCtx, {
        type: "line",
        data: {
          labels: ["T6/2025", "T7/2025", "T8/2025", "T9/2025 (Dự báo)"],
          datasets: [
            {
              label: "Doanh thu 8 ngày cuối tháng (VNĐ)",
              data: [520000000, 580000000, 620000000, 558000000],
              borderColor: "#ffc107",
              backgroundColor: "rgba(255, 193, 7, 0.1)",
              tension: 0.4,
              fill: true,
            },
            {
              label: "Mục tiêu 8 ngày cuối",
              data: [600000000, 600000000, 600000000, 650000000],
              borderColor: "#dc3545",
              backgroundColor: "rgba(220, 53, 69, 0.1)",
              borderDash: [5, 5],
              tension: 0,
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            title: {
              display: true,
              text: "Xu hướng doanh thu 8 ngày cuối tháng",
            },
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function (value) {
                  return (value / 1000000).toFixed(0) + "M";
                },
              },
            },
          },
        },
      });
    </script>
    <!-- Filter Integration Script -->
    <script src="../assets/js/data-consistency.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/filter-handler.js"></script>
  
    <!-- SPA System -->
    <script src="../assets/js/spa/store.js"></script>
    <script src="../assets/js/spa/components.js"></script>
    <script src="../assets/js/spa/router.js"></script>
    <script src="../assets/js/spa/integration.js"></script>

    <!-- Universal Page Initializer -->
    <script src="../assets/js/shared/page-initializer.js"></script>
  </body>
</html>
